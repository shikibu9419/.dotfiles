#!/bin/zsh

message() {
  printf "\e[31;1mUPDATE: \e[37;1m$1\e[m\n"
}

reloadenv() {
  source ~/.zshenv && source ~/.zshrc > /dev/null
}

reloadenv

message 'brew'
brew update
brew upgrade
brew cleanup

message 'zplug'
if ! zplug check --verbose; then
  printf 'Install? [y/N]: '
  if read -q; then
    echo; zplug install
  fi
fi

message 'vscode'
code --list-extensions > $DOTPATH/init/vscode-extensions

echo 'Reloading...'
reloadenv
