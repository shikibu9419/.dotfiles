#!/bin/zsh

usage() {
  name=`basename $0`
  cat <<EOF
Usage:
  update [Targets]
Targets:
  brew   b   Update Homebrew.
  vscode v   Update VS Code package list.
  zplug  z   Update zplug.
EOF
  exit 1
}

if [[ $# -ne 1 ]]; then
  usage
fi

case $1 in
  zplug|z)
    source ~/.zshrc > /dev/null
    if ! zplug check --verbose; then
      printf "Install? [y/N]: "
      if read -q; then
        echo; zplug install
      fi
    fi
    echo "Reloading..."
    source ~/.zshrc
    ;;
  brew|b)
    brew update
    brew upgrade
    brew cleanup
    ;;
  vscode|v)
    code --list-extensions > ~/dotfiles/init/vscode/package_list.txt
    echo "vscode package list: updated."
    ;;
  *)
    usage
    ;;
esac
