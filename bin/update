#!/bin/zsh

usage() {
  name=`basename $0`
  cat <<EOF
Usage:
  update [Targets]
Targets:
  zplug     Update zplug.
  brew      Update Homebrew.
EOF
  exit 1
}

if [[ $# -ne 1 ]]; then
  usage
fi

case $1 in
  zplug)
    source ~/.zshrc 2> /dev/null
    if ! zplug check --verbose; then
      printf "Install? [y/N]: "
      if read -q; then
        echo; zplug install
      fi
    fi
    echo "Reloading..."
    source ~/.zshrc
    ;;
  brew)
    brew update
    brew upgrade
    brew cleanup
    ;;
  *)
    usage
    ;;
esac
